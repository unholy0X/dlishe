# DishFlow Backend Environment Variables

# Server
PORT=8080
LOG_LEVEL=debug

# Database
DATABASE_URL=postgres://dishflow:dishflow@localhost:5432/dishflow?sslmode=disable
DATABASE_MAX_OPEN_CONNS=100
DATABASE_MAX_IDLE_CONNS=25
DATABASE_CONN_MAX_LIFETIME=15m

# Redis
REDIS_URL=redis://localhost:6379

# Clerk Authentication
CLERK_PUBLISHABLE_KEY=pk_test_xxxxxxxx
CLERK_SECRET_KEY=sk_test_xxxxxxxx

# JWT Authentication (legacy, kept for reference)
JWT_SECRET=your-secret-must-be-at-least-32-characters-long
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=720h

# Gemini AI
GEMINI_API_KEY=your-gemini-api-key
GEMINI_MOCK_MODE=true

# CORS
CORS_ALLOWED_ORIGINS=*

# ──────────────────────────────────────────────
# RevenueCat (In-App Subscriptions)
# ──────────────────────────────────────────────
# Get these from: https://app.revenuecat.com > Project Settings > API Keys
#
# REVENUECAT_SECRET_KEY: Server-side secret key (starts with "sk_")
#   Used to call RevenueCat REST API (GET /v1/subscribers/{id})
#   Found in: RC Dashboard > Project > API Keys > Secret API key
#   Leave empty to disable API sync (webhook-only mode still works)
REVENUECAT_SECRET_KEY=

# REVENUECAT_WEBHOOK_SECRET: Webhook authentication token
#   You choose this value and set it in RC Dashboard > Integrations > Webhooks
#   as the "Authorization header" value (without "Bearer " prefix, we add it)
#   Your backend validates incoming webhooks against this secret
#   Leave empty to accept all webhooks (not recommended in production)
REVENUECAT_WEBHOOK_SECRET=

# Storage (Cloudflare R2 / S3)
STORAGE_BUCKET=dishflow-assets
STORAGE_ENDPOINT=https://your-account.r2.cloudflarestorage.com
STORAGE_ACCESS_KEY=your-access-key
STORAGE_SECRET_KEY=your-secret-key

# Concurrency Limits
MAX_CONCURRENT_VIDEO_JOBS=20
MAX_CONCURRENT_LIGHT_JOBS=30

# Cleanup Worker
CLEANUP_ENABLED=true
CLEANUP_INTERVAL=5m
CLEANUP_MAX_JOB_AGE=35m

# Swagger
ENABLE_SWAGGER=false

# Admin emails (comma-separated, unlimited extractions + auto-public recipes)
ADMIN_EMAILS=
